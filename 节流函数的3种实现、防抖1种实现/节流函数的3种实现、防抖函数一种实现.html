<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <script>
    // èŠ‚æµå‡½æ•°å®ç° 1.å®šæ—¶å™¨ç‰ˆæœ¬:é¦–æ¬¡è§¦å‘ä¸ä¼šæ‰§è¡Œï¼›åœæ­¢è§¦å‘åè¿˜ä¼šæ‰§è¡Œä¸€æ¬¡ï¼›
    function throttle1(func, wait) {
      let timer = null;
      return function (...args) {
        if (!timer) {

          timer = setTimeout(() => {
            timer = null;
            func(...args);
          }, wait);
        }
      }
    }

    // èŠ‚æµå‡½æ•°å®ç° 2.æ—¶é—´æˆ³ç‰ˆæœ¬:é¦–æ¬¡è§¦å‘ç«‹å³æ‰§è¡Œï¼Œåœæ­¢è§¦å‘åå°±ä¸ä¼šå†æ‰§è¡Œï¼›
    function throttle2(func, wait) {
      // å¯¹æ¯”æ—¶é—´æˆ³ï¼Œåˆå§‹åŒ–ä¸º0åˆ™é¦–æ¬¡è§¦å‘ç«‹å³æ‰§è¡Œ
      let previous = 0;
      return function (...args) {
        let context = this;
        let now = new Date().getTime();
        // é—´éš”å¤§äºwaitåˆ™æ‰§è¡Œ func å¹¶æ›´æ–°å¯¹æ¯”æ—¶é—´æˆ³
        if (now - previous > wait) {
          func.apply(context, args);
          previous = now;
        }
      }
    }

    // èŠ‚æµå‡½æ•°å®ç° 3.èåˆå‰ä¸¤ç§ æ—¶é—´æˆ³+å®šæ—¶å™¨ç‰ˆæœ¬ï¼š é¦–æ¬¡è§¦å‘ç«‹å³æ‰§è¡Œï¼Œåœæ­¢åä¼šå†æ‰§è¡Œä¸€æ¬¡
    function throttle3(func, wait) {
      let timeout;
      let previous = 0;
      return function (...args) {
        let context = this;
        let now = new Date().getTime();
        // è·ç¦»ä¸‹æ¬¡å‡½æ•°æ‰§è¡Œçš„å‰©ä½™æ—¶é—´
        let remaining = wait - (now - previous);
        // å¦‚æœæ— å‰©ä½™æ—¶é—´æˆ–ç³»ç»Ÿæ—¶é—´ä¿®æ”¹
        if (remaining <= 0 || remaining > wait) {
          // å¦‚æœå®šæ—¶å™¨è¿˜å­˜åœ¨ åˆ™æ¸…é™¤å¹¶ç½®ä¸ºnull
          if (timeout) {
            clearTimeout(timeout);
            timeout = null;
          }
          // æ›´æ–°å¯¹æ¯”æ—¶é—´æˆ³å¹¶æ‰§è¡Œå‡½æ•°
          previous = now;
          func.apply(context, args);
        } else if (!timeout) {
          // å¦‚æœæœ‰å‰©ä½™æ—¶é—´ä½†å®šæ—¶å™¨ä¸å­˜åœ¨ï¼Œåˆ™è®¾ç½®å®šæ—¶å™¨
          // remainingæ¯«ç§’åæ‰§è¡Œå‡½æ•°ï¼Œæ›´æ–°å¯¹æ¯”æ—¶é—´æˆ³ å¹¶å°†å®šæ—¶å™¨ç½®ä¸ºnull
          timeout = setTimeout(() => {
            previous = new Date().getTime();
            timeout = null;
            func.apply(context, args);
          }, remaining)
        }
      }
    }

    // é˜²æŠ–å‡½æ•°å®ç° 1.å®šæ—¶å™¨ç‰ˆæœ¬; åœ¨ä¸€æ®µæ—¶é—´å†…ï¼Œå›è°ƒå‡½æ•°åªä¼šè°ƒç”¨ä¸€æ¬¡ï¼Œå³è§¦å‘äº‹ä»¶çš„æœ€åä¸€æ¬¡ï¼›æ¯æ¬¡éƒ½ä¼šé‡æ–°è§¦å‘è®¡æ—¶ï¼Œä¸€ç›´ä¸åœå°±å¯èƒ½ä¸€ç›´ä¸è§¦å‘ï¼›
    function debounce(func, wait) {
      let timer = null;
      return function (...args) {
        if (timer) {
          clearTimeout(timer); // æœªæ‰§è¡ŒæœŸé—´åˆè¢«è°ƒç”¨ï¼Œå®šæ—¶å™¨æ¸…é™¤é‡æ–°è®¡ç®—
        }
        timer = setTimeout(() => {
            func(...args);
          }, wait);
      }
    }


    // test
    const func = () => {
      console.log("ğŸŠ")
    }
    const test1 = throttle1(func, 3000);
    const test2 = throttle2(func, 3000);
    const test3 = throttle3(func, 3000);
    const test4 = debounce(func, 3000);

    document.onmousemove = () => {
      // func();
      // test1();
      // test2();
      // test3();
      test4();
    }

    // ç”¨CSSå®ç°å®šæ—¶å™¨çš„åŠŸèƒ½
    // è¯¦è§è¿™ç¯‡æ–‡ç« ï¼šhttps://mp.weixin.qq.com/s/kw1Em1xmFEL7q7tefUF6Kw
    /**
     * æ€»ç»“ï¼š
     * ä½ å¯èƒ½ä¸éœ€è¦å®šæ—¶å™¨çš„å‡ ä¸ªæ›¿ä»£æ–¹æ¡ˆï¼Œç›¸æ¯”å®šæ—¶å™¨è€Œè¨€ï¼ŒCSS åœ¨æ§åˆ¶å®šæ—¶å™¨çš„å¼€å¯å’Œæš‚åœä¸Šæ›´æœ‰ä¼˜åŠ¿ï¼Œä¸‹é¢æ€»ç»“ä¸€ä¸‹
    1. :hoveré…åˆtransitionå»¶æ—¶ã€transitionendç›‘å¬å¯ä»¥å®ç°é¼ æ ‡ç»è¿‡å»¶æ—¶è§¦å‘æ•ˆæœï¼Œæ¯”å¦‚é˜²æŠ–èŠ‚æµ
    2. :activeé…åˆtransitionå»¶æ—¶ã€transitionendç›‘å¬å¯ä»¥å®ç°é•¿æŒ‰è§¦å‘æ•ˆæœ
    3. CSS åŠ¨ç”»è®¾ç½®infiniteåé…åˆanimationiterationç›‘å¬å¯ä»¥å®ç°å‘¨æœŸæ€§è§¦å‘æ•ˆæœï¼Œæ¯”å¦‚è½®æ’­å›¾hoverå°±æš‚åœ
    4. å¯ä»¥ç›´æ¥é€šè¿‡:hoveræ¥æ§åˆ¶å°åŠ¨ç”»çš„æš‚åœå’Œæ’­æ”¾
    */
  </script>
</body>

</html>