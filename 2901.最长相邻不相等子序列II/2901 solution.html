<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      // 方法一：动态规划
      // 时间复杂度：O(n^2*L)
      // 空间复杂度：O(n)
      var getWordsInLongestSubsequence = function (words, groups) {
        const n = groups.length;
        const dp = new Array(n).fill(1);
        const prev = new Array(n).fill(-1);
        let maxIndex = 0;

        for (let i = 1; i < n; i++) {
          for (let j = 0; j < i; j++) {
            if (
              check(words[i], words[j]) &&
              dp[j] + 1 > dp[i] &&
              groups[i] !== groups[j]
            ) {
              dp[i] = dp[j] + 1;
              prev[i] = j;
            }
          }
          if (dp[i] > dp[maxIndex]) {
            maxIndex = i;
          }
        }

        const ans = [];
        for (let i = maxIndex; i >= 0; i = prev[i]) {
          ans.push(words[i]);
        }
        ans.reverse();
        return ans;
      };

      const check = (s1, s2) => {
        if (s1.length !== s2.length) {
          return false;
        }
        let diff = 0;
        for (let i = 0; i < s1.length; i++) {
          if (s1[i] !== s2[i]) {
            if (++diff > 1) {
              return false;
            }
          }
        }
        return diff === 1;
      };

      // test
      let n = 3,
        words = ["bab", "dab", "cab"],
        groups = [1, 2, 2];
      console.log(getWordsInLongestSubsequence(words, groups));
    </script>
  </body>
</html>
